define([
	'backbone',
	'app'
], function (Backbone, Appflow) {
	Appflow.Models.Index = Backbone.Model.extend({
		defaults: {},
		initialize: function() {
			this.collection = this.core.setCollection('Tasks', {
				initData: [{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				},{
					Id: this.core.generateId(),
					Text: '2',
					Value: '3'
				}]
			});

		},

		getData: function () {
			return {
				data: this.collection.toJSON()
			};
		},

		incrementId: function (id) {
			var el = this.collection.get(id);
			
			el.set('Text', (+el.get('Text') + 1) + '');
		},

		filterData: function () {
			this.collection.reset(this.collection.filter(function (element) {
				return !(+element.get('Text') % 2);	
			}));

			this.trigger('filter_ended');
		}
	});
});
